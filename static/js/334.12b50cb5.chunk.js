"use strict";(self.webpackChunktask_manager=self.webpackChunktask_manager||[]).push([[334],{334:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var i=n(1413),r=n(9439),a=n(2791),o=n(9434),s=n(7222),l=n(132),d=n(4225),c=n(3418),u=n(7609),h=n(5519),m=n(8546),p=n(4378),x=n(9852),f=n(2114),Z=n(890),v=n(1862),g=n(1634),k=n(3329),j=function(e){var t=e.parentComponent,n=e.priority,s=(0,o.I0)(),l=(0,d.$)().filter,u=(0,d.a)().user,j=(0,a.useState)(l),C=(0,r.Z)(j,2),b=C[0],O=C[1],B=(0,a.useState)("FiltersModal"===t?"none":n||"without"),w=(0,r.Z)(B,2),y=w[0],N=w[1];(0,a.useEffect)((function(){s((0,g.l)(b))}),[s,b]);var M="FiltersModal"===t?{without:h.Z[400],low:m.Z[200],medium:p.Z[200],high:x.Z[200]}:{low:m.Z[200],medium:p.Z[200],high:x.Z[200],without:h.Z[400]};function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}return(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:c.Z.OBFiltersModalLabel,children:"Label color"}),(0,k.jsx)("div",{className:"".concat("FiltersModal"===t?c.Z.OBFiltersModalRadioGroupV:c.Z.OBFiltersModalRadioGroupH),children:Object.keys(M).map((function(e){return(0,k.jsx)(f.Z,{label:"FiltersModal"===t?(0,k.jsx)(Z.Z,{style:{fontSize:"12px",fontFamily:"Poppins, sans-serif",color:"dark"===u.theme?"rgba(255, 255, 255, 0.50)":"rgba(22, 22, 22, 0.50)"},sx:{"&.Mui-checked":{color:M[e]}},children:"without"===e?"Without priority":I(e)}):null,className:"FiltersModal"===t?c.Z.OBFiltersModalRadioLabelV:c.Z.OBFiltersModalRadioLabelH,control:(0,k.jsx)(v.Z,(0,i.Z)((0,i.Z)({className:c.Z.OBFiltersModalRadioBtn},(n=e,{value:n,onChange:"FiltersModal"===t?function(e){return O(e.target.value)}:function(e){return N(e.target.value)},checked:"FiltersModal"===t?b===n:y===n,name:"priority",inputProps:{"aria-label":n}})),{},{sx:{color:M[e],"&.Mui-checked":{color:M[e]},"&.Mui-checked .MuiSvgIcon-root":{fontSize:"17px"},"&:not(.Mui-checked) .MuiSvgIcon-root":{fontSize:"14px",backgroundColor:M[e],borderRadius:"50%"}}}))},e);var n}))})]})},C=function(e){var t=e.className,n=(0,o.I0)(),i=(0,a.useState)(!1),s=(0,r.Z)(i,2),l=s[0],h=s[1],m=(0,d.$)().boardById,p=(0,d.a)().user;return(0,a.useEffect)((function(){var e=function(e){"Escape"===e.code&&h(!1)};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[l]),(0,k.jsxs)("div",{className:"".concat(t," ").concat(c.Z.OBFilterModalContainer),"data-theme":p.theme,style:{display:"flex",justifyContent:"space-between",position:"relative"},children:[(0,k.jsx)("h2",{className:c.Z.KkTitle,style:{padding:!m.background&&"4px"},children:m.title}),(0,k.jsxs)("button",{type:"button",className:c.Z.KkBtnFilters,onClick:function(){h(!0)},children:[(0,k.jsx)("svg",{width:"16px",height:"16px",children:(0,k.jsx)("use",{href:"".concat(u.Z,"#icon-filter")})}),(0,k.jsx)("p",{children:"Filters"})]}),l&&(0,k.jsxs)("div",{className:c.Z.OBFiltersModalContainer,style:{opacity:l?1:0},"data-theme":p.theme,children:[(0,k.jsx)("button",{type:"button",className:c.Z.OBFilterBtnIcon,"aria-label":"close",onClick:function(){h(!1)},children:(0,k.jsx)("svg",{width:"18",height:"18",children:(0,k.jsx)("use",{className:"icon",href:u.Z+"#icon-close"})})}),(0,k.jsx)("h4",{className:c.Z.OBFiltersModalTitle,children:"Filters"}),(0,k.jsx)("hr",{className:c.Z.OBFiltersModalSeparator}),(0,k.jsxs)("div",{className:c.Z.OBFiltersModalContent,children:[(0,k.jsx)(j,{parentComponent:"FiltersModal"}),(0,k.jsx)("p",{className:c.Z.OBFiltersModalShow,onClick:function(){n((0,g.l)("all"))},children:"Show all"})]})]})]})},b=n(8422),O="card",B=function(e){var t=e.onDrop,n=e.board,i=e.taskOwner,a=e.columnTitle,o=e.tasks,s=e.taskOrder,l=e.columns,d=e.columnIndex,c=e.children,u=(0,b.L)({accept:O,canDrop:function(e,t){var n=l.findIndex((function(t){return t._id===e.taskOwner}));return[n+1,n-1,n].includes(d)},drop:function(e,r){t(e,r,n,i,a,o,s,d)},collect:function(e){return{isOver:e.isOver(),canDrop:!!e.canDrop()}}}),h=(0,r.Z)(u,2),m=h[0],p=m.isOver,x=m.canDrop,f=h[1];return(0,k.jsx)("div",{ref:f,children:(0,k.jsx)("div",{style:{backgroundColor:p&&x?"rgba(43, 255, 0, 0.075)":p&&!x?"rgba(233, 14, 14, 0.178)":"initial",borderRadius:"8px",transition:"250ms cubic-bezier(0.4, 0, 0.2, 1) 0s"},children:c})})},w=n(3733),y=function(e){var t=e.className,n=e.title,i=e.theme,r=e.onClick;return(0,k.jsx)("li",{className:t,children:(0,k.jsxs)("button",{className:(0,w.Z)(c.Z.KkBtnColumn,c.Z[i]),onClick:r,children:[(0,k.jsx)("div",{className:(0,w.Z)(c.Z.KkIconPlusColumn,c.Z[i]),children:(0,k.jsx)("svg",{className:(0,w.Z)(c.Z[i]),width:"14px",height:"14px",children:(0,k.jsx)("use",{href:"".concat(u.Z,"#icon-plus")})})}),(0,k.jsx)("p",{className:(0,w.Z)(c.Z[i]),children:n})]})})},N=function(e){var t=e.className,n=e.title,i=e.theme,r=e.onEdit,a=e.onTrash;return(0,k.jsx)("div",{className:t,children:(0,k.jsxs)("div",{className:(0,w.Z)(c.Z.KkWrapTitleCards,c.Z[i]),children:[(0,k.jsxs)("p",{className:(0,w.Z)(c.Z[i]),children:[" ",n]}),(0,k.jsxs)("div",{className:c.Z.KkSvgTitleCards,children:[(0,k.jsx)("button",{className:c.Z.KkBtnIcons,onClick:r,children:(0,k.jsx)("svg",{className:(0,w.Z)(c.Z[i]),width:"16px",height:"16px",children:(0,k.jsx)("use",{href:"".concat(u.Z,"#icon-pencil")})})}),(0,k.jsx)("button",{className:c.Z.KkBtnIcons,onClick:a,children:(0,k.jsx)("svg",{className:(0,w.Z)(c.Z[i]),width:"16px",height:"16px",children:(0,k.jsx)("use",{href:"".concat(u.Z,"#icon-trash")})})})]})]})})},M=n(3433),I=n(1172),T=n.n(I),F=n(7689),D=n(7892),S=n.n(D),A=n(1067),P=n(5488),E=n(1652),L=n(4750),_=n(5101),K=n(5547),R=n(4507),W=n(3466),z=function(e){var t=e.deadline,n=e.onFormatDeadline,i=(0,d.a)().user,o=(0,a.useState)("auto"),s=(0,r.Z)(o,2),l=s[0],h=s[1],m=(0,a.useState)(!1),p=(0,r.Z)(m,2),x=p[0],f=p[1],Z=(0,a.useState)(t?S()(t,"DD/MM/YYYY"):S()()),v=(0,r.Z)(Z,2),g=v[0],j=v[1],C=S()(g).format("dddd, MMMM D")===S()().format("dddd, MMMM D")?"[Today,] MMMM D":"dddd, MMMM D";(0,a.useEffect)((function(){var e=9*g.format(C).length;h("".concat(e,"px"))}),[g,C]),(0,a.useEffect)((function(){var e=S()(g).format("DD/MM/YYYY");n&&n(e)}),[g,n]);var b=(0,K.Z)({typography:{fontFamily:["Poppins","sans-serif"].join(",")},components:{MuiPaper:{styleOverrides:{root:{position:"relative",width:"233px",height:"254px",padding:"18px",background:"dark"===i.theme?"#1F1F1F":"#FFF",border:"1px solid",borderRadius:"8px",borderColor:"violet"===i.theme?"#585bbe":"#bedfad"}}},MuiPickersDay:{styleOverrides:{root:{width:"23px",height:"23px",fontSize:"14px",fontweight:"400",lineHeight:"18px","&:hover":{backgroundColor:"violet"===i.theme?"#8d8fc9":"#9fd186"}},dayOutsideMonth:{color:"dark"===i.theme?"#FFF":"#161616"},dayWithMargin:{color:"dark"===i.theme?"rgba(255, 255, 255, 0.20)":"rgba(22, 22, 22, 0.20)","&.Mui-disabled:not(.Mui-selected)":{color:"dark"===i.theme?"rgba(255, 255, 255, 0.20)":"rgba(22, 22, 22, 0.20)"}}}},MuiPickersLayout:{styleOverrides:{root:{width:"197px"}}},MuiDateCalendar:{styleOverrides:{root:{width:"197px"}}},MuiPickersFadeTransitionGroup:{styleOverrides:{root:{color:"#161616",fontFamily:"Poppins, sans-serif",fontSize:"16px",fontWeight:500,letterSpacing:"-0.32px"}}},MuiDayCalendar:{styleOverrides:{slideTransition:{minHeight:"155px"},header:{marginTop:"14px"},weekDayLabel:{height:"23px",width:"23px",color:"dark"===i.theme?"rgba(255, 255, 255, 0.50)":"rgba(22, 22, 22, 0.50)",fontFamily:"Poppins, sans-serif",fontSize:"14px",fontWeight:500,lineHeight:"normal",letterSpacing:"-0.28px"}}},MuiPickersCalendarHeader:{styleOverrides:{root:{padding:0,margin:0,borderBottom:"1px solid",borderBottomColor:"dark"===i.theme?"rgba(255, 255, 255, 0.20)":"rgba(22, 22, 22, 0.20)"},label:{margin:0,paddingBottom:"14px",color:"dark"===i.theme?"#FFF":"#161616"},labelContainer:{marginRight:"auto",marginLeft:"auto"}}},MuiPickersArrowSwitcher:{styleOverrides:{spacer:{width:0}}}},palette:{primary:{main:"#BEDBB0",dark:"violet"===i.theme?"#8d8fc9":"#9fd186"}}});return(0,k.jsx)("div",{children:(0,k.jsxs)(E._,{dateAdapter:L.y,children:[" ",(0,k.jsx)(R.Z,{theme:b,children:(0,k.jsx)(_.M,{open:x,onClose:function(){return f(!1)},onChange:function(e){return j(e)},value:g,format:C,disablePast:!0,dayOfWeekFormatter:function(e){return e.slice(0,2)},showDaysOutsideCurrentMonth:!0,slots:{openPickerButton:function(){return null}},slotProps:{switchViewButton:{sx:{display:"none"}},previousIconButton:{sx:{position:"absolute",top:"5px",left:"5px",size:"small",color:"violet"===i.theme?"#5255BC":"#BEDBB0",stroke:"none"}},nextIconButton:{sx:{position:"absolute",top:"5px",right:"5px",color:"violet"===i.theme?"#5255BC":"#BEDBB0",stroke:"none"}},textField:{fullWidth:!1,onClick:function(){return f(!0)},variant:"standard",size:"small",sx:{width:l,minWidth:"130px"},InputProps:{disableUnderline:!0,"aria-label":"deadline",style:{fontSize:"14px",fontFamily:"Poppins, sans-serif",color:"violet"===i.theme?"#5255BC":"#BEDBB0",fontWeight:500},endAdornment:(0,k.jsx)(W.Z,{position:"start",sx:{cursor:"pointer"},children:(0,k.jsx)("svg",{className:c.Z.OBAddDateIcon,width:"18px",children:(0,k.jsx)("use",{href:u.Z+"#icon-chevron-down","aria-label":"open calendar",edge:"start"})})})}}}})})]})})},Y=function(e){var t=e.modalTitle,n=e.modalBtnTitle,s=e.idColumn,l=e.id,h=e.cardTitle,m=e.description,p=e.priority,x=e.deadline,f=e.onClose,Z=e.operation,v=(0,d.a)().user,g=(0,o.I0)(),C=(0,F.UO)().boardName,b=(0,a.useState)(h),O=(0,r.Z)(b,2),B=O[0],w=O[1],y=(0,a.useState)(m),N=(0,r.Z)(y,2),M=N[0],I=N[1],T=(0,a.useState)(null),D=(0,r.Z)(T,2),S=D[0],A=D[1];return(0,k.jsxs)("div",{className:c.Z.OBAddContainer,"data-theme":v.theme,children:[(0,k.jsx)("h4",{className:c.Z.OBAddTitle,children:t}),(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements.title.value.trim(),n=e.target.elements.description.value.trim(),r=e.target.elements.priority.value;if(""===n&&(n=" "),t!==h||n!==m||r!==p||S!==x){var a={title:t,description:n,priority:r,deadLine:S};g(Z(l?(0,i.Z)((0,i.Z)({},a),{},{taskOwner:s,idTask:l,boardId:C}):(0,i.Z)((0,i.Z)({},a),{},{taskOwner:s,boardId:C}))),e.target.reset(),e.currentTarget===e.target&&(f(),document.body.style.overflow="visible")}else f()},autoComplete:"off",children:[(0,k.jsx)("label",{children:(0,k.jsx)("input",{type:"text",name:"title",placeholder:"Title",autoFocus:!0,required:!0,className:c.Z.OBAddInput,defaultValue:B,onChange:function(e){return w(e.target.value)}})}),(0,k.jsx)("label",{children:(0,k.jsx)("textarea",{type:"text",name:"description",placeholder:"Description",className:"".concat(c.Z.OBAddInput," ").concat(c.Z.OBAddDescription),defaultValue:M,onChange:function(e){return I(e.target.value)}})}),(0,k.jsx)(j,{parentComponent:"AddCard",priority:p}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:c.Z.OBAddlabel,children:"Deadline"}),(0,k.jsx)(z,{deadline:x,onFormatDeadline:function(e){A(e)}})]}),(0,k.jsxs)("button",{type:"submit",className:c.Z.OBAddSubmitBtn,children:[(0,k.jsx)("div",{className:c.Z.OBAddIconWrapper,children:(0,k.jsx)("svg",{className:c.Z.OBAddSubmitIcon,children:(0,k.jsx)("use",{href:u.Z+"#icon-plus"})})}),n]})]})]})},H=function(e,t){switch(e){case"low":return"#8FA1D0";case"medium":return"rgba(224, 156, 181, 1)";case"high":return"#BEDBB0";case"without":return t}},U=function(e){var t=e.id,n=e.cardTitle,i=e.description,h=e.priority,m=e.deadline,p=e.idColumn,x=e.taskOwner,f=e.index,Z=e.columnTitle,v=e.moveInsideColumn,g=e.moveToAnotherColumn,j=e.moveToAnotherColumnUnder,C=(0,o.I0)(),B=(0,d.a)().user,w=(0,F.UO)().boardName,y=(0,a.useState)(!1),N=(0,r.Z)(y,2),I=N[0],T=N[1],D=(0,a.useState)(!1),E=(0,r.Z)(D,2),L=E[0],_=E[1],K=(0,a.useState)(!1),R=(0,r.Z)(K,2),W=R[0],z=R[1],U=S()().format("DD/MM/YYYY")===m,$=(0,s.a)();(0,a.useEffect)((function(){var e=function(e){"Escape"===e.code&&z(!1)};window.addEventListener("keydown",e);var t=function(e){var t=document.querySelector(".".concat(c.Z.OBCardPopupContainer));!t||null!==t&&void 0!==t&&t.contains(e.target)||z(!1)};return window.addEventListener("keydown",e),window.addEventListener("click",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("click",t)}}),[W]);var V=(0,A.c)({type:O,item:{idTask:t,title:n,description:i,priority:h,deadLine:m,taskOwner:x,index:f},collect:function(e){return{isDragging:!!e.isDragging()}}}),q=(0,r.Z)(V,2),G=q[0].isDragging,J=q[1],Q=(0,a.useRef)(null),X=(0,b.L)({accept:O,collect:function(e){return{handlerId:e.getHandlerId(),isOver:e.isOver()}},hover:function(e,t){var n;if(Q.current){var i=e.index,r=f,a=null===(n=Q.current)||void 0===n?void 0:n.getBoundingClientRect(),o=(a.bottom-a.top)/2,s=t.getClientOffset().y-a.top,l=$.columns.map((function(t){return t._id===e.taskOwner?t.taskOrder.indexOf(e.idTask):-1})).filter((function(e){return-1!==e}));i<r&&s<o?e.taskOwner!==x&&g(r,e):i>r&&s>o?e.taskOwner!==x&&j(r,e):(e.taskOwner!==x&&(l[0]===r?s>o?j(r,e):s<o&&g(r,e):i<r&&s>o?j(r,e):i>r&&s<o&&g(r,e)),i!==r&&e.taskOwner===x&&v(i,r),e.index=r)}}}),ee=(0,r.Z)(X,2),te=ee[0],ne=te.handlerId,ie=te.isOver;J((0,ee[1])(Q));return(0,k.jsxs)("div",{ref:Q,"data-handler-id":ne,"data-theme":B.theme,style:{opacity:G?.3:1,backgroundColor:ie&&"rgba(75, 65, 65, 0.1)",transition:"250ms cubic-bezier(0.4, 0, 0.2, 1) 0s",borderLeftColor:H(h,"dark"===B.theme?"rgba(255, 255, 255, 0.30)":"rgba(22, 22, 22, 0.30)")},className:c.Z.OBCardContainer,children:[(0,k.jsx)("h4",{className:c.Z.OBCardTitle,children:n}),(0,k.jsx)("p",{className:"".concat(c.Z.OBCardDescription," ").concat(L?c.Z.OBCardDescriptionFull:c.Z.OBCardDescriptionShort),onClick:function(){return _(!L)},children:i}),(0,k.jsx)("hr",{className:c.Z.OBCardSeparator}),(0,k.jsxs)("div",{className:c.Z.OBCardFooterContainer,children:[(0,k.jsxs)("table",{className:c.Z.OBCardValuesContainer,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:c.Z.OBCardProreties,children:"Priority"}),(0,k.jsx)("th",{className:c.Z.OBCardProreties,children:"Deadline"})]})}),(0,k.jsx)("tbody",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("div",{style:{backgroundColor:H(h,"dark"===B.theme?"rgba(255, 255, 255, 0.30)":"rgba(22, 22, 22, 0.30)")},className:c.Z.OBCardPriorityCircle})}),(0,k.jsx)("td",{className:c.Z.OBCardDate,children:m})]})})]}),(0,k.jsxs)("div",{className:c.Z.OBCardIconsWrapper,children:[U&&(0,k.jsx)("svg",{className:c.Z.OBCardBellIcon,width:"16",height:"16",style:{stroke:"violet"===B.theme?"#585bbe":"#bedfad"},children:(0,k.jsx)("use",{href:u.Z+"#icon-bell"})}),(0,k.jsx)("button",{type:"button",className:c.Z.OBCardBtnIcon,"aria-label":"edit task",onClick:function(){return T(!0)},children:(0,k.jsx)("svg",{width:"16",height:"16",children:(0,k.jsx)("use",{href:u.Z+"#icon-pencil"})})}),I&&(0,k.jsx)(P.u,{isOpen:I,onClose:function(){return T(!1)},children:(0,k.jsx)(Y,{idColumn:p,modalTitle:"Edit card",id:t,cardTitle:n,description:i,priority:h,deadline:m,modalBtnTitle:"Edit",operation:l.xJ,onClose:function(){return T(!1)}})}),(0,k.jsx)("button",{type:"button",className:c.Z.OBCardBtnIcon,onClick:function(e){e.stopPropagation(),z(!0)},"aria-label":"move task to another column",children:(0,k.jsx)("svg",{width:"16",height:"16",children:(0,k.jsx)("use",{href:u.Z+"#icon-arrow"})})}),W&&(0,k.jsx)("div",{className:c.Z.OBCardPopupContainer,children:$.columns.length<=1?(0,k.jsx)("p",{children:"Add columns"}):(0,k.jsx)("ul",{className:c.Z.OBCardPopupList,children:$.columns&&$.columns.map((function(e,r){var a=e._id,o=e.title;return(0,k.jsxs)("li",{className:x===a?"".concat(c.Z.OBCardPopupItem," ").concat(c.Z.disabledTransfer):c.Z.OBCardPopupItem,children:[(0,k.jsx)("p",{className:c.Z.OBCardPopupText,children:o}),(0,k.jsx)("button",{type:"button",className:c.Z.OBCardBtnIcon,"aria-label":"change column",onClick:function(){return function(e,t,n,i,r,a,o){C((0,l.xJ)({taskOwner:e,title:t,description:n,priority:i,deadLine:r,idTask:a,boardId:w,columnIndex:o})),z(!1)}(a,n,i,h,m,t,r)},children:(0,k.jsx)("svg",{width:"16",height:"16",children:(0,k.jsx)("use",{href:u.Z+"#icon-arrow"})})})]},a)}))})}),(0,k.jsx)("button",{type:"button",className:c.Z.OBCardBtnIcon,"aria-label":"delete task",onClick:function(){C((0,l._5)({id:t,boardName:w}));var e=$.columns.findIndex((function(e){return e._id===x})),n=$.columns[e].taskOrder,i=n&&n.findIndex((function(e){return e===t}));if(-1!==i){var r=(0,M.Z)(n);r.splice(i,1),C((0,l.L9)({idColumn:x,title:Z,taskOrder:r}))}},children:(0,k.jsx)("svg",{width:"16",height:"16",children:(0,k.jsx)("use",{href:u.Z+"#icon-trash"})})})]})]})]})},$=function(e){var t=e.tasks,n=e.idColumn,r=e.columnTitle,s=e.getReoderedCardsIds,u=(0,o.I0)(),h=(0,d.$)().filter,m=function(e){return e.map((function(e){return e._id}))},p=(0,a.useCallback)((function(e,r){var a=(0,i.Z)((0,i.Z)({},r),{},{_id:r.idTask});delete a.idTask,delete a.index;var o=T()((0,M.Z)(t),{$splice:[[e,0,a]]});s({_id:n,taskOrder:m(o)})}),[t,n,s]),x=(0,a.useCallback)((function(e,r){var a=(0,i.Z)((0,i.Z)({},r),{},{_id:r.idTask});delete a.idTask,delete a.index;var o=T()((0,M.Z)(t),{$splice:[[e+1,0,a]]});s({_id:n,taskOrder:m(o)})}),[t,n,s]),f=(0,a.useCallback)((function(e,i){var a=(0,M.Z)(t),o=T()(a,{$splice:[[e,1],[i,0,a[e]]]});u((0,l.L9)({idColumn:n,title:r,taskOrder:m(o)}))}),[t,n,r,u]),Z="all"===h?t:t.filter((function(e){return(null===e||void 0===e?void 0:e.priority)===h})),v=(0,a.useCallback)((function(e,t){var n=e.title,i=e.description,a=e.priority,o=e.deadLine,s=e._id,l=e.taskOwner;return(0,k.jsx)("li",{children:(0,k.jsx)(U,{columnTitle:r,cardTitle:n,description:i,priority:a,deadline:o,id:s,taskOwner:l,index:t,moveToAnotherColumn:p,moveToAnotherColumnUnder:x,moveInsideColumn:f})},s)}),[r,p,x,f]);return(0,k.jsx)("ul",{className:c.Z.KkCards,children:0!==Z.length&&Z.map((function(e,t){return v(e,t)}))})},V=function(e){var t=e.title,n=e.className,i=e.theme,r=e.onClick;return(0,k.jsx)("div",{className:n,children:(0,k.jsxs)("button",{className:(0,w.Z)(c.Z.KkBtnCard,c.Z[i]),onClick:r,children:[(0,k.jsx)("div",{className:(0,w.Z)(c.Z.KkIconPlusCard,c.Z[i]),children:(0,k.jsx)("svg",{className:(0,w.Z)(c.Z[i]),width:"14px",height:"14px",children:(0,k.jsx)("use",{href:"".concat(u.Z,"#icon-plus")})})}),(0,k.jsx)("p",{className:(0,w.Z)(c.Z[i]),children:t})]})})},q=n(4942),G=function(e){var t=e.modalTitle,n=e.modalBtnTitle,s=e.onClose,l=e.operation,h=e.idColumn,m=e.infoData,p=(0,d.a)().user,x=(0,F.UO)(),f=(0,o.I0)(),Z=(0,a.useState)(m?{title:m.title}:{title:""}),v=(0,r.Z)(Z,2),g=v[0],j=v[1];return(0,k.jsxs)("div",{className:c.Z.AAColumnContainer,"data-theme":p.theme,children:[(0,k.jsx)("h4",{className:c.Z.AAColumnTitle,children:t}),(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=h?{title:g.title,idColumn:h}:{title:g.title,board:x.boardName};(null===m||void 0===m?void 0:m.title)!==g.title?(f(l(t)),s()):s()},autoComplete:"off",children:[(0,k.jsx)("label",{children:(0,k.jsx)("input",{type:"text",name:"title",placeholder:"Title",autoFocus:!0,required:!0,className:c.Z.AAColumnInput,value:g.title||"",onChange:function(e){var t=e.target,n=t.name,r=t.value;j((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,q.Z)({},n,r))}))}})}),(0,k.jsxs)("button",{type:"submit",className:c.Z.AAColumnBtn,children:[(0,k.jsx)("div",{className:c.Z.AAColumnSvgContainer,children:(0,k.jsx)("svg",{className:c.Z.AAColumnSvg,children:(0,k.jsx)("use",{href:u.Z+"#icon-plus"})})}),n]})]})]})},J=n(2722),Q=n(2486),X=function(){var e=(0,d.$)(),t=e.boardById,n=e.isLoading,u=(0,d.a)().loading,h=(0,o.I0)(),m=(0,a.useState)(!1),p=(0,r.Z)(m,2),x=p[0],f=p[1],Z=(0,a.useState)(!1),v=(0,r.Z)(Z,2),g=v[0],j=v[1],b=(0,a.useState)(!1),O=(0,r.Z)(b,2),w=O[0],M=O[1],I=(0,a.useState)(""),T=(0,r.Z)(I,2),F=T[0],D=T[1],S=(0,a.useState)(""),A=(0,r.Z)(S,2),E=A[0],L=A[1],_=(0,a.useState)({}),K=(0,r.Z)(_,2),R=K[0],W=K[1],z=(0,s.a)(),H=null===Q.HE||void 0===Q.HE?void 0:Q.HE.find((function(e){return e.name===t.background})),U={backgroundImage:"url(".concat(null===H||void 0===H?void 0:H.mobile,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"};window.innerWidth>=768&&(U.backgroundImage="url(".concat(null===H||void 0===H?void 0:H.tablet,")")),window.innerWidth>=1440&&(U.backgroundImage="url(".concat(null===H||void 0===H?void 0:H.desktop,")"));var q=function(e,t,n,r,a,o,s,d){if(0===o.filter((function(t){return t._id===e.idTask})).length){var c=e.idTask;X(c),e.taskOwner=r,h((0,l.xJ)((0,i.Z)((0,i.Z)({},e),{},{boardId:n,columnIndex:d}))),R._id===r&&h((0,l.L9)({idColumn:r,title:a,taskOrder:R.taskOrder}))}},X=function(e){z.columns.forEach((function(t){var n=t.taskOrder.filter((function(t){return t!==e}));n.length!==t.taskOrder.length&&h((0,l.L9)({idColumn:t._id,title:t.title,taskOrder:n}))}))};return(0,k.jsxs)("div",{className:c.Z.KkSectionMainDashboard,style:U,children:[n&&u&&(0,k.jsx)(J.Z,{}),(0,k.jsx)(C,{className:c.Z.KkFilters}),(0,k.jsxs)("ul",{className:c.Z.KkColums,children:[z.columns&&z.columns.map((function(e,t){var n=e.board,i=e._id,r=e.title,a=e.tasks,o=e.taskOrder;return(0,k.jsx)("li",{children:(0,k.jsxs)(B,{onDrop:q,board:n,taskOwner:i,columnTitle:r,tasks:a,taskOrder:o,columns:z.columns,columnIndex:t,children:[(0,k.jsx)(N,{className:c.Z.TitleCards,title:r,onEdit:function(){j(!0),D(i),L(r)},onTrash:function(){return h((0,l.eA)(i))}}),a&&(0,k.jsx)($,{tasks:a,idColumn:i,columnTitle:r,board:n,getReoderedCardsIds:W}),(0,k.jsx)(V,{className:c.Z.KkBtnAddCard,title:"Add another card",theme:"light",onClick:function(){M(!0),D(i)}})]})},i)})),(0,k.jsx)(y,{className:c.Z.KkBtnAddColumnMain,title:"Add another column",theme:"light",onClick:function(){return f(!0)}})]}),x&&(0,k.jsx)(P.u,{isOpen:x,onClose:function(){return f(!1)},children:(0,k.jsx)(G,{modalTitle:"Add column",modalBtnTitle:"Add",onClose:function(){return f(!1)},operation:l.Wf})}),g&&(0,k.jsx)(P.u,{isOpen:g,onClose:function(){return j(!1)},children:(0,k.jsx)(G,{modalTitle:"Edit column",modalBtnTitle:"Add",onClose:function(){return j(!1)},idColumn:F,infoData:{title:E},operation:l.L9})}),w&&(0,k.jsx)(P.u,{isOpen:w,onClose:function(){return M(!1)},children:(0,k.jsx)(Y,{modalTitle:"Add card",modalBtnTitle:"Add",onClose:function(){return M(!1)},idColumn:F,operation:l.gI})})]})},ee=function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("section",{children:(0,k.jsx)(X,{})})})},te=function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(ee,{})})}}}]);
//# sourceMappingURL=334.12b50cb5.chunk.js.map